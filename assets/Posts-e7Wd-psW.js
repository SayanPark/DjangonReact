import{r as m,j as e,L as d,a as h}from"./index-DeJTxeFS.js";import{u as j}from"./useUserData-CwB4ehvH.js";import{M as u}from"./Moment-DWxqNNgk.js";function g(){const[l,n]=m.useState([]),o=j()?.user_id,i=async()=>{try{const s=await h.get(`author/dashboard/post-list/${o}/`);n(s?.data),console.log(s?.data)}catch(s){console.log(s)}},x=s=>{const r=s.target.value.toLowerCase();if(r==="")i();else{const a=l.filter(t=>t.title.toLowerCase().includes(r));n(a)}},b=s=>{const r=s.target.value,a=[...l];console.log(a),r==="Newest"?a.sort((t,c)=>new Date(c.date)-new Date(t.date)):r==="Oldest"&&a.sort((t,c)=>new Date(t.date)-new Date(c.date)),n(a)};return m.useEffect(()=>{i()},[]),e.jsx(e.Fragment,{children:e.jsx("section",{className:"py-4",dir:"rtl",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border bg-transparent rounded-3",children:[e.jsx("div",{className:"card-header bg-transparent border-bottom p-3",children:e.jsxs("div",{className:"d-sm-flex justify-content-between align-items-center",children:[e.jsxs("h5",{className:"mb-2 mb-sm-0",children:["تمامی پست‌ها ",e.jsx("span",{className:"badge bg-primary bg-opacity-10 text-primary",children:l?.length})]}),e.jsxs(d,{to:"/add-post/",className:"btn btn-sm btn-primary mb-0",children:["ایجاد پست ",e.jsx("i",{className:"fas fa-plus"})]})]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row g-3 align-items-center justify-content-between mb-3",children:[e.jsx("div",{className:"col-md-8",children:e.jsxs("form",{className:"rounded position-relative",children:[e.jsx("input",{onChange:s=>x(s),className:"form-control pe-5 bg-transparent",type:"search",placeholder:"جست‌وجو مقالات","aria-label":"Search"}),e.jsx("button",{className:"btn bg-transparent border-0 px-2 py-0 position-absolute top-50 end-0 translate-middle-y",type:"submit",children:e.jsx("i",{className:"fas fa-search fs-6 "})})]})}),e.jsx("div",{className:"col-md-3",children:e.jsx("form",{children:e.jsxs("select",{onChange:b,className:"form-select z-index-9 bg-transparent","aria-label":".form-select-sm",children:[e.jsx("option",{value:"",children:"مرتب سازی براساس"}),e.jsx("option",{value:"Newest",children:"جدیدترین"}),e.jsx("option",{value:"Oldest",children:"قدیمی‌ترین"})]})})})]}),e.jsx("div",{className:"table-responsive border-0",children:e.jsxs("table",{className:"table align-middle p-4 mb-0 table-hover table-shrink",children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"border-0 rounded-start",children:"عنوان مقاله"}),e.jsx("th",{scope:"col",className:"border-0",children:"تعداد بازدید"}),e.jsx("th",{scope:"col",className:"border-0",children:"تاریخ انتشار"}),e.jsx("th",{scope:"col",className:"border-0",children:"دسته بندی"}),e.jsx("th",{scope:"col",className:"border-0",children:"وضعیت"}),e.jsx("th",{scope:"col",className:"border-0 rounded-end",children:"تغییرات"})]})}),e.jsx("tbody",{className:"border-top-0",children:l?.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("h6",{className:"mt-2 mt-md-0 mb-0 ",children:s?.status==="پیش نویس"||s?.status==="غیرفعال"||s?.status==="Draft"||s?.status==="Disabled"?e.jsx("span",{className:"text-secondary text-decoration-none",children:s?.title}):e.jsx(d,{to:`/post/${s?.slug}`,className:"text-dark text-decoration-none",children:s?.title})})}),e.jsx("td",{children:e.jsx("h6",{className:"mb-0",children:e.jsx("a",{className:"text-dark text-decoration-none",children:s?.status==="پیش نویس"||s?.status==="غیرفعال"||s?.status==="Draft"||s?.status==="Disabled"?e.jsx("span",{className:"text-secondary",children:"---"}):s?.view})})}),e.jsx("td",{children:s?.status==="پیش نویس"||s?.status==="غیرفعال"||s?.status==="Draft"||s?.status==="Disabled"?e.jsx("span",{className:"text-secondary",children:"---"}):u(s.date)}),e.jsx("td",{children:s?.category?.title}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-dark text-white mb-2",children:s?.status})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[e.jsx("a",{href:"#",className:"btn-round mb-0 btn btn-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Delete",onClick:async a=>{if(a.preventDefault(),window.confirm("Are you sure you want to delete this post?"))try{await h.delete(`author/dashboard/post-detail/${o}/${s.id}/`),n(l.filter(t=>t.id!==s.id))}catch(t){console.error("Failed to delete post:",t)}},children:e.jsx("i",{className:"bi bi-trash"})}),e.jsx(d,{to:`/edit-post/${s?.id}/`,className:"btn btn-primary btn-round mb-0","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit",children:e.jsx("i",{className:"bi bi-pencil-square"})})]})})]},r))})]})})]})]})})})})})})}export{g as default};
