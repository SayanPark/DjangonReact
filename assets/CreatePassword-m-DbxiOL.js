import{r as t,e as N,i as w,R as v,j as s,a as y}from"./index-D9XFb3fJ.js";import n from"./Toast-zgAXI2bR.js";function S(){const[d,p]=t.useState(""),[u,h]=t.useState(""),[x,a]=t.useState(!1),[r,f]=t.useState(null),j=N(),[l]=w(),o=l.get("otp"),c=l.get("uidb64"),i=l.get("reset_token");v.useEffect(()=>{(!o||!c||!i)&&f("پارامترهای لازم برای بازنشانی رمز عبور وجود ندارد. لطفاً از لینکی که به ایمیل شما ارسال شده استفاده کنید.")},[o,c,i]);const g=async e=>{if(e.preventDefault(),r){n("error",r);return}if(a(!0),d!==u)a(!1),n("warning","رمز عبور مطابقت ندارد");else{a(!0);const b={otp:o,uidb64:c,reset_token:i,password:d};try{const m=await y.post("user/password-change/",b,{headers:{"Content-Type":"application/json"}});n("success","رمز شما با موفقیت تغییر کرد"),j("/login")}catch(m){console.log(m),n("error","خطایی رخ داد، لطفاً دوباره تلاش کنید"),a(!1)}}};return s.jsx(s.Fragment,{children:s.jsx("section",{className:"container d-flex flex-column vh-100",style:{marginTop:"150px",direction:"rtl"},children:s.jsx("div",{className:"row align-items-center justify-content-center g-0 h-lg-100 py-8",children:s.jsx("div",{className:"col-lg-5 col-md-8 py-8 py-xl-0",children:s.jsx("div",{className:"card shadow",children:s.jsxs("div",{className:"card-body p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h1",{className:"mb-1 fw-bold",children:"نوشتن رمز جدید"}),s.jsx("span",{children:"برای اکانت خود یک رمز جدید انتخاب نمایید"})]}),r?s.jsx("div",{className:"alert alert-danger",role:"alert",children:r}):s.jsxs("form",{className:"needs-validation",onSubmit:g,children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"password",className:"form-label",children:"رمز جدید"}),s.jsx("input",{type:"password",className:"form-control",placeholder:"**************",required:!0,autoComplete:"new-password",onChange:e=>p(e.target.value)})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"password",className:"form-label",children:"تکرار رمز"}),s.jsx("input",{type:"password",className:"form-control",placeholder:"**************",required:!0,autoComplete:"new-password",onChange:e=>h(e.target.value)})]}),s.jsx("div",{children:s.jsx("div",{className:"d-grid",children:x===!0?s.jsxs("button",{disabled:!0,className:"btn btn-primary",children:["صبرکنید ",s.jsx("i",{className:"fas fa-spinner fa-spin"})]}):s.jsxs("button",{type:"submit",className:"btn btn-primary",children:["ذخیره رمز ",s.jsx("i",{className:"fas fa-check-circle"})]})})})]})]})})})})})})}export{S as default};
