import{R as h,j as e,L as m,r as c,a as b}from"./index-JCKiixbs.js";import{M as T}from"./Moment-BJF_HTSE.js";import{S as R}from"./index-DMHw_8LG.js";import{g as D}from"./categoryImageMapper-ztfwixWj.js";import{u as K}from"./useUserData-Bb5bRmxx.js";const L=`
  .slick-arrow.slick-next::before,
  .slick-arrow.slick-prev::before {
    display: none !important;
  }
`;function M(a){const{className:l,style:i,onClick:t}=a;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:L}),e.jsx("div",{className:l,style:{...i,display:"flex",justifyContent:"center",alignItems:"center",right:0,zIndex:1,width:"60px",height:"120px",backgroundColor:"rgba(255, 255, 255, 0.8)",borderTopLeftRadius:"60px",borderBottomLeftRadius:"60px",cursor:"pointer",color:"rgba(50, 142, 110, 0.4)",fontSize:"80px",fontWeight:"bold",userSelect:"none"},onClick:t,children:e.jsx("span",{style:{display:"inline-block",transform:"translateY(-5px)"},children:">"})})]})}function q(a){const{className:l,style:i,onClick:t}=a;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:L}),e.jsx("div",{className:l,style:{...i,display:"flex",justifyContent:"center",alignItems:"center",left:0,zIndex:1,width:"60px",height:"120px",backgroundColor:"rgba(255, 255, 255, 0.8)",borderTopRightRadius:"60px",borderBottomRightRadius:"60px",cursor:"pointer",color:"rgba(50, 142, 110, 0.4)",fontSize:"80px",fontWeight:"bold",userSelect:"none"},onClick:t,children:e.jsx("span",{style:{display:"inline-block",transform:"translateY(-5px)"},children:"<"})})]})}function V({src:a,style:l,className:i,children:t}){const[r,y]=h.useState(!1),p=h.useRef();h.useEffect(()=>{const j=new IntersectionObserver(([u])=>{u.isIntersecting&&(y(!0),j.disconnect())},{rootMargin:"100px"});return p.current&&j.observe(p.current),()=>{j.disconnect()}},[]);const N={...l,backgroundImage:r?`linear-gradient(to top, rgba(0,0,0,60%), rgba(0,0,0,0.1)), url(${a})`:void 0,backgroundSize:"cover",backgroundPosition:"center"};return e.jsx("div",{ref:p,className:i,style:N,children:t})}function Y({category:a}){const[l,i]=h.useState({dots:!1,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,arrows:!0,autoplay:!0,autoplaySpeed:3e3,nextArrow:e.jsx(M,{}),prevArrow:e.jsx(q,{}),responsive:[{breakpoint:992,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:576,settings:{slidesToShow:1}}]});return e.jsx("section",{className:"pt-5 pb-5 mt-3",children:e.jsx("div",{className:"container2",children:e.jsx("div",{className:"row g-0",children:e.jsxs("div",{className:"col-12",children:[e.jsx("div",{className:"mb-4 me-3",children:e.jsx("h2",{children:"دسته بندی مطالب"})}),e.jsx(R,{...l,children:a?.filter(t=>t.title!=="اخبار").map(t=>{const r=D(t.slug)||t.image;return e.jsx(m,{to:`/category/${t.slug}`,children:e.jsx("div",{className:"px-2",children:e.jsx("div",{className:"card bg-transparent",children:e.jsx("div",{className:"d-flex flex-column align-items-center",children:e.jsx(V,{src:r,style:{width:"100%",height:120,position:"relative"},children:e.jsxs("div",{style:{position:"absolute",bottom:0,width:"100%",paddingTop:8,paddingBottom:8,color:"white",textShadow:"0 0 5px rgba(0,0,0,0.7)"},children:[e.jsx("h6",{className:"me-2",children:t.title}),e.jsxs("small",{className:"me-2",children:[t.post_count||"0"," مقاله"]})]})})})})})},t.id)})})]})})})})}function G(){const a=["/A1.webp","/Four_Iranian_women_wearing_outfits_representing_medicine,_engineering.webp","/Iranian_rural_women_with_traditional_rural_Iranian_clothing_standingg.webp","/Iranian_rural_women_with_traditional_rural_Iranian_clothing_standing.webp","/fxhcgjcg.webp"],[l,i]=h.useState(0);return h.useEffect(()=>{const t=setInterval(()=>{i(r=>(r+1)%a.length)},4e3);return()=>clearInterval(t)},[a.length]),e.jsx("div",{style:{position:"absolute",top:"1%",left:"33%",width:"35%",height:"93%",overflow:"hidden",borderRadius:"30px",zIndex:"2"},children:a.map((t,r)=>e.jsx("img",{src:t,alt:`slide-${r}`,style:{position:"absolute",width:"100%",height:"100%",objectFit:"cover",transition:"opacity 1s ease-in-out",opacity:r===l?1:0}},r))})}function ee({logoutMessage:a}){const[l,i]=c.useState(null);h.useEffect(()=>{if(a){i(a);const s=setTimeout(()=>i(null),5e3);return()=>clearTimeout(s)}},[a]);const[t,r]=c.useState([]),[y,p]=c.useState([]),[N,j]=c.useState(0),[u,$]=c.useState([]),[,_]=c.useState(!0),[A]=c.useState({dots:!1,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,arrows:!1,autoplay:!0,autoplaySpeed:3e3,responsive:[{breakpoint:992,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:576,settings:{slidesToShow:1}}]}),v=4,[n,g]=c.useState(1),I=n*v,E=I-v,C=t.filter(s=>s.category&&s.category.title==="اخبار"),w=t.filter(s=>!(s.category&&s.category.title==="اخبار")),F=w.slice(E,I),S=Math.ceil(w.length/v),B=K()?.user_id,z=Array.from({length:S},(s,o)=>o+1),O=async()=>{try{_(!0);const[s,o,x]=await Promise.all([b.get("post/lists/"),b.get("post/category/list/"),b.get("user/count/")]),P=s.data.results.filter(d=>{const f=d.status.toLowerCase();return f!=="draft"&&f!=="disabled"&&f!=="پیش‌ نویس"&&f!=="غیرفعال"});r(P);const k={};P.forEach(d=>{d.category&&d.category.id&&(k[d.category.id]=(k[d.category.id]||0)+1)});const W=o.data.map(d=>({...d,post_count:k[d.id]||0}));p(W),x&&x.data&&typeof x.data.user_count=="number"&&j(x.data.user_count)}catch(s){s.response?console.error("API response error:",s.response.status,s.response.data):s.request?console.error("API no response received:",s.request):console.error("API error:",s.message),console.log(s)}finally{_(!1)}};c.useEffect(()=>{O()},[]);const U=async()=>{try{const s=await b.get("user/all/");$(s.data)}catch(s){console.error("Failed to fetch users:",s)}};return c.useEffect(()=>{async function s(){await U()}s()},[B]),e.jsx(e.Fragment,{children:e.jsxs("div",{style:{direction:"rtl",textAlign:"right"},children:[e.jsx("section",{className:"pt-4 pb-4 custom-section-color",children:e.jsx("div",{className:"container mt-4",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h2",{className:"text-end mb-3",children:"سخن اول"}),e.jsx("p",{className:"text-end mb-5 mt-5",children:'نام "شهرزنان" از داستان‌های کهن ایرانی الهام گرفته شده است. شهرزاد، نماد زن دانا، باهوش و شجاع، با داستان‌سرایی خود نه تنها جان خود را نجات داد، بلکه الهام بخش نسل‌های بعدی زنان شد.'}),e.jsxs("p",{children:["ما نیز در شرکت شهرزنان، می‌خواهیم الهام بخش زنان باشیم تا با استفاده از توانایی‌ها و خلاقیت خود، به موفقیت‌های بزرگی دست یابند. اهداف ما توانمندسازی اقتصادی زنان، ارائه آموزش‌های تخصصی، مشاوره‌های کسب‌وکار، ایجاد شبکه‌ای قوی از زنان کارآفرین می‌باشد.",e.jsx(m,{to:"/about/",className:"btn btn-outline-success me-4 mt-1",children:"بیشتر بدانید"})]})]}),e.jsxs("div",{className:"col-md-6 align-self-end",children:[e.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx("img",{loading:"lazy",src:"/main-image.webp",className:"main-image",style:{zIndex:3}}),e.jsx(G,{}),e.jsx("img",{loading:"lazy",src:"/accessory1.webp",className:"around-image image1",style:{zIndex:1}}),e.jsx("img",{loading:"lazy",src:"/accessory2.webp",className:"around-image image2"}),e.jsx("img",{loading:"lazy",src:"/accessory3.webp",className:"around-image image3"}),e.jsx("img",{loading:"lazy",src:"/accessory4.webp",className:"around-image image4"})]}),e.jsxs("div",{className:"counter-section",style:{position:"static"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("span",{children:e.jsx("p",{style:{fontWeight:"bold"},children:N})}),e.jsx("span",{children:e.jsx("p",{children:"شهروند"})})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("span",{children:e.jsx("p",{style:{fontWeight:"bold"},children:C.length})}),e.jsx("span",{children:e.jsx("p",{children:"اخبار"})})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("span",{children:e.jsx("p",{style:{fontWeight:"bold"},children:w.length})}),e.jsx("span",{children:e.jsx("p",{children:"مقالات"})})]})})]})]})]})})}),e.jsx("section",{className:"pt-4 pb-4",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsx("h2",{className:"text-end d-block mt-1",children:"جدیدترین اخبار"})})})})}),e.jsx("section",{className:"pt-4 pb-4",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:C.slice(0,4).map(s=>e.jsx("div",{className:"col-sm-6 col-lg-3 post-title-container",style:{overflow:"hidden"},children:e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-fold position-relative",children:e.jsx("img",{className:"card-img",style:{width:"100%",height:"160px",objectFit:"cover"},src:s?.image&&s.image.trim()!==""?s.image:"/Loader.gif",alt:"Card image",onError:o=>{o.target.src="/Loader.gif"}})}),e.jsxs("div",{className:"card-body px-3 pt-3",children:[e.jsx("h4",{className:"card-title",style:{overflow:"hidden",whiteSpace:"nowrap"},children:e.jsx(m,{to:`/post/${s.slug}`,className:"btn-link text-reset stretched-link fw-bold text-decoration-none post-title-text",title:s?.title,children:s?.title?.length>15?s?.title?.substring(0,15)+"…":s?.title})}),e.jsx("button",{style:{border:"none",background:"none"},children:e.jsx("i",{className:"fas fa-bookmark text-danger"})}),e.jsx("button",{style:{border:"none",background:"none"},children:e.jsx("i",{className:"fas fa-thumbs-up text-primary"})}),e.jsx("i",{className:"fas fa-eye"})," ",s?.view,e.jsxs("ul",{className:"mt-3 list-style-none",style:{listStyle:"none",paddingRight:0},children:[e.jsx("li",{children:e.jsxs("a",{href:"#",className:"text-dark text-decoration-none",children:[e.jsx("i",{className:"fas fa-user"})," ",s?.user?.full_name]})}),e.jsxs("li",{className:"mt-2",children:[e.jsx("i",{className:"fas fa-calendar"})," ",T(s.date)]})]})]})]})},s?.id))}),e.jsxs("nav",{className:"d-flex justify-content-center mt-2",children:[e.jsx("ul",{className:"pagination",children:e.jsx("li",{className:`page-item ${n===1?"disabled":""}`,children:e.jsxs("button",{className:"page-link text-dark fw-bold me-1 rounded",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},onClick:()=>g(n-1),children:[e.jsx("i",{className:"fas fa-arrow-right ms-2",style:{fontSize:"0.75rem"}}),"قبل"]})})}),e.jsx("ul",{className:"pagination",children:z?.map(s=>e.jsx("li",{className:`page-item ${n===s?"active":""}`,children:e.jsx("button",{className:"page-link text-dark fw-bold rounded",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},onClick:()=>g(s),children:s})},s))}),e.jsx("ul",{className:"pagination",children:e.jsx("li",{className:`page-item ${n===S?"disabled":""}`,children:e.jsxs("button",{className:"page-link text-dark fw-bold ms-1 rounded",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},onClick:()=>g(n+1),children:["بعد",e.jsx("i",{className:"fas fa-arrow-left me-3",style:{fontSize:"0.75rem"}})]})})}),e.jsx("ul",{children:e.jsx(m,{to:"/news/",className:"btn btn-outline-primary",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"مشاهده همه"})})]})]})}),e.jsx("section",{className:"pt-4 pb-4 custom-bg-yellow",children:e.jsxs("div",{className:"container mt-4",children:[e.jsx("h3",{className:"mb-3 me-2",children:"شهروندان شهرزنان کارآفرین"}),e.jsxs("div",{className:"row align-items-start",children:[e.jsx("div",{className:"col-md-6 align-self-center",children:u&&u.length>0?e.jsx(R,{...A,children:u.map(s=>e.jsxs("div",{className:"text-center px-1",children:[e.jsx("div",{className:"avatar avatar-xxl mb-2",children:(()=>{const o=s.image&&s.image.trim()!==""&&!s.image.includes("default-user")?s.image:"/K.webp";return e.jsx(m,{to:`/author-profile/${s.id}`,children:e.jsx("img",{className:"avatar-img rounded-circle",style:{width:"100px",height:"100px",objectFit:"cover",margin:"0 auto",display:"block"},src:o,alt:"avatar",onError:x=>{x.target.src!=="/K.webp"&&(x.target.src="/K.webp")}})})})()}),e.jsx("h5",{children:s.full_name||s.username}),e.jsx("p",{className:"m-0",children:s.bio||"هیچ متنی یافت نشد"})]},s.id))}):e.jsx("p",{children:"درحال بازگذاری شهروندان..."})}),e.jsxs("div",{className:"col align-items-center mt-7 mb-5",children:[e.jsx("p",{children:"از تمام بانوان کارآفرین، سرمایه گذاران و علاقه‌مندان به توسعه پایدار دعوت میکنیم به ما بپیوندند تا باهم دنیایی بهتر و برابر برای همه بسازیم."}),e.jsx("p",{children:"با دنیای شهروندان شهرزنان کارآفرین آشنا شوید و از تجربیات آن‌ها بهره ببرید."}),e.jsx("br",{}),e.jsx(m,{to:"/register/",className:"btn btn-success",children:"به ما بپیوندید"}),e.jsx(m,{to:"/authors/",className:"btn btn-outline-success me-2",children:"مشاهده شهروندان"})]})]})]})}),e.jsx("section",{className:"pt-4 pb-4",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsx("h2",{className:"text-end d-block mt-1",children:"جدیدترین مقالات"})})})})}),e.jsx("section",{className:"pt-4 pb-4",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:F?.map(s=>e.jsx("div",{className:"col-sm-6 col-lg-3 post-title-container",style:{overflow:"hidden"},children:e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-fold position-relative",children:e.jsx("img",{className:"card-img",style:{width:"100%",height:"160px",objectFit:"cover"},src:s?.image&&s.image.trim()!==""?s.image:"/Loader.gif",alt:"Card image",onError:o=>{o.target.src="/Loader.gif"}})}),e.jsxs("div",{className:"card-body px-3 pt-3",children:[e.jsx("h4",{className:"card-title",style:{overflow:"hidden",whiteSpace:"nowrap"},children:e.jsx(m,{to:`/post/${s.slug}`,className:"btn-link text-reset stretched-link fw-bold text-decoration-none post-title-text",title:s.title,children:s.title.length>18?s.title.substring(0,18)+"…":s.title})}),e.jsxs("ul",{className:"mt-3 list-style-none",style:{listStyle:"none",paddingRight:0},children:[e.jsx("li",{children:e.jsxs("a",{href:"#",className:"text-dark text-decoration-none",children:[e.jsx("i",{className:"fas fa-user"})," ",s?.user?.full_name]})}),e.jsxs("li",{className:"mt-2",children:[e.jsx("i",{className:"fas fa-calendar"})," ",T(s.date)]})]})]})]})},s?.id))}),e.jsxs("nav",{className:"d-flex justify-content-center mt-2",children:[e.jsx("ul",{className:"pagination",children:e.jsx("li",{className:`page-item ${n===1?"disabled":""}`,children:e.jsxs("button",{className:"page-link text-dark fw-bold me-1 rounded",onClick:()=>g(n-1),style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:[e.jsx("i",{className:"fas fa-arrow-right ms-2"}),"قبل"]})})}),e.jsx("ul",{className:"pagination",children:z?.map(s=>e.jsx("li",{className:`page-item ${n===s?"active":""}`,children:e.jsx("button",{className:"page-link text-dark fw-bold rounded",onClick:()=>g(s),style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:s})},s))}),e.jsx("ul",{className:"pagination",children:e.jsx("li",{className:`page-item ${n===S?"disabled":""}`,children:e.jsxs("button",{className:"page-link text-dark fw-bold ms-1 rounded",onClick:()=>g(n+1),style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:["بعد",e.jsx("i",{className:"fas fa-arrow-left me-3 "})]})})}),e.jsx("ul",{children:e.jsx(m,{to:"/all-posts/",className:"btn btn-outline-primary",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"مشاهده همه"})})]})]})}),e.jsx(Y,{category:y})]})})}export{ee as default};
