import{r as o,j as e,L as p,a as N}from"./index-DbBwtu7t.js";import{M as v}from"./Moment-DWljeAbg.js";function M(){const[r,d]=o.useState([]),[i,m]=o.useState(12),[l,h]=o.useState("");o.useEffect(()=>{(async()=>{try{const g=(await N.get("post/lists/")).data.results.filter(c=>{const a=c.status.toLowerCase(),w=c.category?.title||"";return a!=="draft"&&a!=="disabled"&&a!=="پیش‌ نویس"&&a!=="غیرفعال"&&w!=="اخبار"});d(g)}catch(t){console.error("Failed to fetch posts:",t)}})()},[]);const x=s=>{h(s.target.value)},n=[...r];l==="Newest"?n.sort((s,t)=>new Date(t.date)-new Date(s.date)):l==="Oldest"&&n.sort((s,t)=>new Date(s.date)-new Date(t.date));const f=n.slice(0,i),j=()=>{m(s=>Math.min(s+4,12))},u=i<Math.min(r.length,12);return e.jsxs("div",{className:"justify-content-center me-4",style:{direction:"rtl",textAlign:"right",marginLeft:"24px"},children:[e.jsx("div",{className:"row mb-4 me-1 md-0",children:e.jsxs("div",{className:"col-md-3",children:[e.jsx("h2",{className:"mt-4",children:"مقالات"}),e.jsx("form",{children:e.jsxs("select",{onChange:x,value:l,className:"form-select z-index-9 bg-transparent","aria-label":".form-select-sm",children:[e.jsx("option",{value:"",children:"مرتب سازی براساس"}),e.jsx("option",{value:"Newest",children:"جدیدترین"}),e.jsx("option",{value:"Oldest",children:"قدیمی‌ترین"})]})})]})}),e.jsx("div",{className:"row me-1 md-1",style:{margin:"0",padding:"0"},children:f.map(s=>e.jsx("div",{className:"col-sm-6 col-lg-3 post-title-container",style:{overflow:"hidden"},children:e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-fold position-relative",children:e.jsx("img",{className:"card-img",style:{width:"100%",height:"160px",objectFit:"cover"},src:s.image,alt:"Card image"})}),e.jsxs("div",{className:"card-body px-3 pt-3",children:[e.jsx("h4",{className:"card-title",style:{overflow:"hidden",whiteSpace:"nowrap"},children:e.jsx(p,{to:`/post/${s.slug}`,className:"btn-link text-reset stretched-link fw-bold text-decoration-none post-title-text",title:s.title,children:s.title.length>18?s.title.substring(0,18)+"…":s.title})}),e.jsxs("ul",{className:"mt-3 list-style-none",style:{listStyle:"none",paddingRight:0},children:[e.jsx("li",{children:e.jsxs("a",{href:"#",className:"text-dark text-decoration-none",children:[e.jsx("i",{className:"fas fa-user"})," ",s.user?.full_name]})}),e.jsxs("li",{className:"mt-2",children:[e.jsx("i",{className:"fas fa-calendar"})," ",v(s.date)]})]})]})]})},s.id))}),u&&e.jsx("div",{className:"d-flex justify-content-center mt-3",children:e.jsx("button",{className:"btn btn-primary",onClick:j,children:"مشاهده بیشتر"})})]})}export{M as default};
