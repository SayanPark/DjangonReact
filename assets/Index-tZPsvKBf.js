import{R as m,j as e,L as d,r,a as N}from"./index-6zyEhgl3.js";import{M as T}from"./Moment-C_K9XJ9K.js";import{S as _}from"./index-DAyqXjih.js";import{u as V}from"./useUserData-D_vDyuql.js";const L=`
  .slick-arrow.slick-next::before,
  .slick-arrow.slick-prev::before {
    display: none !important;
  }
`;function q(i){const{className:n,style:a,onClick:t}=i;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:L}),e.jsx("div",{className:n,style:{...a,display:"flex",justifyContent:"center",alignItems:"center",right:0,zIndex:1,width:"60px",height:"120px",backgroundColor:"rgba(255, 255, 255, 0.8)",borderTopLeftRadius:"60px",borderBottomLeftRadius:"60px",cursor:"pointer",color:"rgba(50, 142, 110, 0.4)",fontSize:"80px",fontWeight:"bold",userSelect:"none"},onClick:t,children:e.jsx("span",{style:{display:"inline-block",transform:"translateY(-5px)"},children:">"})})]})}function D(i){const{className:n,style:a,onClick:t}=i;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:L}),e.jsx("div",{className:n,style:{...a,display:"flex",justifyContent:"center",alignItems:"center",left:0,zIndex:1,width:"60px",height:"120px",backgroundColor:"rgba(255, 255, 255, 0.8)",borderTopRightRadius:"60px",borderBottomRightRadius:"60px",cursor:"pointer",color:"rgba(50, 142, 110, 0.4)",fontSize:"80px",fontWeight:"bold",userSelect:"none"},onClick:t,children:e.jsx("span",{style:{display:"inline-block",transform:"translateY(-5px)"},children:"<"})})]})}function G({src:i,style:n,className:a,children:t}){const[c,y]=m.useState(!1),g=m.useRef();m.useEffect(()=>{const j=new IntersectionObserver(([u])=>{u.isIntersecting&&(y(!0),j.disconnect())},{rootMargin:"100px"});return g.current&&j.observe(g.current),()=>{j.disconnect()}},[]);const v={...n,backgroundImage:c?`linear-gradient(to top, rgba(0,0,0,60%), rgba(0,0,0,0.1)), url(${i})`:void 0,backgroundSize:"cover",backgroundPosition:"center"};return e.jsx("div",{ref:g,className:a,style:v,children:t})}function M({category:i}){const[n,a]=m.useState({dots:!1,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,arrows:!0,autoplay:!0,autoplaySpeed:3e3,nextArrow:e.jsx(q,{}),prevArrow:e.jsx(D,{}),responsive:[{breakpoint:992,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:576,settings:{slidesToShow:1}}]});return e.jsx("section",{className:"pt-5 pb-5 mt-3",children:e.jsx("div",{className:"container2",children:e.jsx("div",{className:"row g-0",children:e.jsxs("div",{className:"col-12",children:[e.jsx("div",{className:"mb-4 me-3",children:e.jsx("h2",{children:"دسته بندی مطالب"})}),e.jsx(_,{...n,children:i?.filter(t=>t.title!=="اخبار").map(t=>e.jsx(d,{to:`/category/${t.slug}`,children:e.jsx("div",{className:"px-2",children:e.jsx("div",{className:"card bg-transparent",children:e.jsx("div",{className:"d-flex flex-column align-items-center",children:e.jsx(G,{src:t.image,style:{width:"100%",height:120,position:"relative"},children:e.jsxs("div",{style:{position:"absolute",bottom:0,width:"100%",paddingTop:8,paddingBottom:8,color:"white",textShadow:"0 0 5px rgba(0,0,0,0.7)"},children:[e.jsx("h6",{className:"me-2",children:t.title}),e.jsxs("small",{className:"me-2",children:[t.post_count||"0"," مقاله"]})]})})})})})},t.id))})]})})})})}function Y(){const i=["https://i.postimg.cc/4yPjF6rs/168422861-10627390.webp","https://i.postimg.cc/Wp7R3VtC/22597574-6649594.webp","https://i.postimg.cc/CLvWG4G4/378116512-e6e71982-34e1-497e-9c48-e69edd769506.webp","https://i.postimg.cc/VLsx0hC6/4952776-39693.webp","https://i.postimg.cc/tJpL5SvB/6622376-3370253.webp"],[n,a]=m.useState(0);return m.useEffect(()=>{const t=setInterval(()=>{a(c=>(c+1)%i.length)},4e3);return()=>clearInterval(t)},[i.length]),e.jsx("div",{style:{position:"absolute",top:"1%",left:"33%",width:"35%",height:"93%",overflow:"hidden",borderRadius:"30px",zIndex:"2"},children:i.map((t,c)=>e.jsx("img",{src:t,alt:`slide-${c}`,style:{position:"absolute",width:"100%",height:"100%",objectFit:"cover",transition:"opacity 1s ease-in-out",opacity:c===n?1:0}},c))})}function Q({logoutMessage:i}){const[n,a]=r.useState(null);m.useEffect(()=>{if(i){a(i);const s=setTimeout(()=>a(null),5e3);return()=>clearTimeout(s)}},[i]);const[t,c]=r.useState([]),[y,g]=r.useState([]),[v,j]=r.useState(0),[u,$]=r.useState([]),[,I]=r.useState(!0),[A]=r.useState({dots:!1,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,arrows:!1,autoplay:!0,autoplaySpeed:3e3,responsive:[{breakpoint:992,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:576,settings:{slidesToShow:1}}]}),w=4,[l,h]=r.useState(1),z=l*w,F=z-w,P=t.filter(s=>s.category&&s.category.title==="اخبار"),S=t.filter(s=>!(s.category&&s.category.title==="اخبار")),B=S.slice(F,z),k=Math.ceil(S.length/w),E=V()?.user_id,R=Array.from({length:k},(s,f)=>f+1),W=async()=>{try{I(!0);const[s,f,x]=await Promise.all([N.get("post/lists/"),N.get("post/category/list/"),N.get("user/count/")]),p=s.data.results.filter(o=>{const b=o.status.toLowerCase();return b!=="draft"&&b!=="disabled"&&b!=="پیش‌ نویس"&&b!=="غیرفعال"});c(p);const C={};p.forEach(o=>{o.category&&o.category.id&&(C[o.category.id]=(C[o.category.id]||0)+1)});const U=f.data.map(o=>({...o,post_count:C[o.id]||0}));g(U),x&&x.data&&typeof x.data.user_count=="number"&&j(x.data.user_count)}catch(s){s.response?console.error("API response error:",s.response.status,s.response.data):s.request?console.error("API no response received:",s.request):console.error("API error:",s.message),console.log(s)}finally{I(!1)}};r.useEffect(()=>{W()},[]);const O=async()=>{try{const s=await N.get("user/all/");$(s.data)}catch(s){console.error("Failed to fetch users:",s)}};return r.useEffect(()=>{async function s(){await O()}s()},[E]),e.jsx(e.Fragment,{children:e.jsxs("div",{style:{direction:"rtl",textAlign:"right"},children:[e.jsx("section",{className:"pt-4 pb-4 custom-section-color",children:e.jsx("div",{className:"container mt-4",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h2",{className:"text-end mb-3",children:"سخن اول"}),e.jsx("p",{className:"text-end mb-5 mt-5",children:'نام "شهرزنان" از داستان‌های کهن ایرانی الهام گرفته شده است. شهرزاد، نماد زن دانا، باهوش و شجاع، با داستان‌سرایی خود نه تنها جان خود را نجات داد، بلکه الهام بخش نسل‌های بعدی زنان شد.'}),e.jsxs("p",{children:["ما نیز در شرکت شهرزنان، می‌خواهیم الهام بخش زنان باشیم تا با استفاده از توانایی‌ها و خلاقیت خود، به موفقیت‌های بزرگی دست یابند. اهداف ما توانمندسازی اقتصادی زنان، ارائه آموزش‌های تخصصی، مشاوره‌های کسب‌وکار، ایجاد شبکه‌ای قوی از زنان کارآفرین می‌باشد.",e.jsx(d,{to:"/about/",className:"btn btn-outline-success me-4 mt-1",children:"بیشتر بدانید"})]})]}),e.jsxs("div",{className:"col-md-6 align-self-end",children:[e.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx("img",{loading:"lazy",src:"https://i.postimg.cc/fRcNd3Hr/5cb0633d80f2cf201a4c3253png-1701765866-31930.webp",className:"main-image",style:{zIndex:3}}),e.jsx(Y,{}),e.jsx("img",{loading:"lazy",src:"https://i.postimg.cc/0NN9qkfX/illustrationpng-1701766114-35035.webp",className:"around-image image1",style:{zIndex:1}}),e.jsx("img",{loading:"lazy",src:"https://i.postimg.cc/pLR2qYnH/illustrationpng-1701766127-42730.webp",className:"around-image image2"}),e.jsx("img",{loading:"lazy",src:"https://i.postimg.cc/6pcBS2dG/vectorpng-1701766195-89727.webp",className:"around-image image3"}),e.jsx("img",{loading:"lazy",src:"https://i.postimg.cc/J7B8cd0g/vectorpng-1701766150-61868.webp",className:"around-image image4"})]}),e.jsxs("div",{className:"counter-section",style:{position:"static"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("span",{children:e.jsx("p",{style:{fontWeight:"bold"},children:v})}),e.jsx("span",{children:e.jsx("p",{children:"شهروند"})})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("span",{children:e.jsx("p",{style:{fontWeight:"bold"},children:P.length})}),e.jsx("span",{children:e.jsx("p",{children:"اخبار"})})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("span",{children:e.jsx("p",{style:{fontWeight:"bold"},children:S.length})}),e.jsx("span",{children:e.jsx("p",{children:"مقالات"})})]})})]})]})]})})}),e.jsx("section",{className:"pt-4 pb-4",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsx("h2",{className:"text-end d-block mt-1",children:"جدیدترین اخبار"})})})})}),e.jsx("section",{className:"pt-4 pb-4",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:P.slice(0,4).map(s=>e.jsx("div",{className:"col-sm-6 col-lg-3 post-title-container",style:{overflow:"hidden"},children:e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-fold position-relative",children:e.jsx("img",{className:"card-img",style:{width:"100%",height:"160px",objectFit:"cover"},src:s.image,alt:"Card image"})}),e.jsxs("div",{className:"card-body px-3 pt-3",children:[e.jsx("h4",{className:"card-title",style:{overflow:"hidden",whiteSpace:"nowrap"},children:e.jsx(d,{to:`/post/${s.slug}`,className:"btn-link text-reset stretched-link fw-bold text-decoration-none post-title-text",title:s?.title,children:s?.title?.length>15?s?.title?.substring(0,15)+"…":s?.title})}),e.jsx("button",{style:{border:"none",background:"none"},children:e.jsx("i",{className:"fas fa-bookmark text-danger"})}),e.jsx("button",{style:{border:"none",background:"none"},children:e.jsx("i",{className:"fas fa-thumbs-up text-primary"})}),e.jsx("i",{className:"fas fa-eye"})," ",s?.view,e.jsxs("ul",{className:"mt-3 list-style-none",style:{listStyle:"none",paddingRight:0},children:[e.jsx("li",{children:e.jsxs("a",{href:"#",className:"text-dark text-decoration-none",children:[e.jsx("i",{className:"fas fa-user"})," ",s?.user?.full_name]})}),e.jsxs("li",{className:"mt-2",children:[e.jsx("i",{className:"fas fa-calendar"})," ",T(s.date)]})]})]})]})},s?.id))}),e.jsxs("nav",{className:"d-flex justify-content-center mt-2",children:[e.jsx("ul",{className:"pagination",children:e.jsx("li",{className:`page-item ${l===1?"disabled":""}`,children:e.jsxs("button",{className:"page-link text-dark fw-bold me-1 rounded",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},onClick:()=>h(l-1),children:[e.jsx("i",{className:"fas fa-arrow-right ms-2",style:{fontSize:"0.75rem"}}),"قبل"]})})}),e.jsx("ul",{className:"pagination",children:R?.map(s=>e.jsx("li",{className:`page-item ${l===s?"active":""}`,children:e.jsx("button",{className:"page-link text-dark fw-bold rounded",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},onClick:()=>h(s),children:s})},s))}),e.jsx("ul",{className:"pagination",children:e.jsx("li",{className:`page-item ${l===k?"disabled":""}`,children:e.jsxs("button",{className:"page-link text-dark fw-bold ms-1 rounded",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},onClick:()=>h(l+1),children:["بعد",e.jsx("i",{className:"fas fa-arrow-left me-3",style:{fontSize:"0.75rem"}})]})})}),e.jsx("ul",{children:e.jsx(d,{to:"/news/",className:"btn btn-outline-primary",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"مشاهده همه"})})]})]})}),e.jsx("section",{className:"pt-4 pb-4 custom-bg-yellow",children:e.jsxs("div",{className:"container mt-4",children:[e.jsx("h3",{className:"mb-3 me-2",children:"شهروندان شهرزنان کارآفرین"}),e.jsxs("div",{className:"row align-items-start",children:[e.jsx("div",{className:"col-md-6 align-self-center",children:u&&u.length>0?e.jsx(_,{...A,children:u.map(s=>e.jsxs("div",{className:"text-center px-1",children:[e.jsx("div",{className:"avatar avatar-xxl mb-2",children:(()=>{const x=(p=>p&&p.trim()!==""&&p!=="http://127.0.0.1:8000/media/default/default-user.jpg")(s.image)?s.image:"https://i.postimg.cc/RVLb8r7B/K.webp";return e.jsx(d,{to:`/author-profile/${s.id}`,children:e.jsx("img",{className:"avatar-img rounded-circle",style:{width:"100px",height:"100px",objectFit:"cover",margin:"0 auto",display:"block"},src:x,alt:"avatar"})})})()}),e.jsx("h5",{children:s.full_name||s.username}),e.jsx("p",{className:"m-0",children:s.bio||"هیچ متنی یافت نشد"})]},s.id))}):e.jsx("p",{children:"درحال بازگذاری شهروندان..."})}),e.jsxs("div",{className:"col align-items-center mt-7 mb-5",children:[e.jsx("p",{children:"از تمام بانوان کارآفرین، سرمایه گذاران و علاقه‌مندان به توسعه پایدار دعوت میکنیم به ما بپیوندند تا باهم دنیایی بهتر و برابر برای همه بسازیم."}),e.jsx("p",{children:"با دنیای شهروندان شهرزنان کارآفرین آشنا شوید و از تجربیات آن‌ها بهره ببرید."}),e.jsx("br",{}),e.jsx(d,{to:"/register/",className:"btn btn-success",children:"به ما بپیوندید"}),e.jsx(d,{to:"/authors/",className:"btn btn-outline-success me-2",children:"مشاهده شهروندان"})]})]})]})}),e.jsx("section",{className:"pt-4 pb-4",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsx("h2",{className:"text-end d-block mt-1",children:"جدیدترین مقالات"})})})})}),e.jsx("section",{className:"pt-4 pb-4",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:B?.map(s=>e.jsx("div",{className:"col-sm-6 col-lg-3 post-title-container",style:{overflow:"hidden"},children:e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-fold position-relative",children:e.jsx("img",{className:"card-img",style:{width:"100%",height:"160px",objectFit:"cover"},src:s.image,alt:"Card image"})}),e.jsxs("div",{className:"card-body px-3 pt-3",children:[e.jsx("h4",{className:"card-title",style:{overflow:"hidden",whiteSpace:"nowrap"},children:e.jsx("a",{href:`/post/${s.slug}`,className:"btn-link text-reset stretched-link fw-bold text-decoration-none post-title-text",title:s.title,children:s.title.length>18?s.title.substring(0,18)+"…":s.title})}),e.jsxs("ul",{className:"mt-3 list-style-none",style:{listStyle:"none",paddingRight:0},children:[e.jsx("li",{children:e.jsxs("a",{href:"#",className:"text-dark text-decoration-none",children:[e.jsx("i",{className:"fas fa-user"})," ",s?.user?.full_name]})}),e.jsxs("li",{className:"mt-2",children:[e.jsx("i",{className:"fas fa-calendar"})," ",T(s.date)]})]})]})]})},s?.id))}),e.jsxs("nav",{className:"d-flex justify-content-center mt-2",children:[e.jsx("ul",{className:"pagination",children:e.jsx("li",{className:`page-item ${l===1?"disabled":""}`,children:e.jsxs("button",{className:"page-link text-dark fw-bold me-1 rounded",onClick:()=>h(l-1),style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:[e.jsx("i",{className:"fas fa-arrow-right ms-2"}),"قبل"]})})}),e.jsx("ul",{className:"pagination",children:R?.map(s=>e.jsx("li",{className:`page-item ${l===s?"active":""}`,children:e.jsx("button",{className:"page-link text-dark fw-bold rounded",onClick:()=>h(s),style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:s})},s))}),e.jsx("ul",{className:"pagination",children:e.jsx("li",{className:`page-item ${l===k?"disabled":""}`,children:e.jsxs("button",{className:"page-link text-dark fw-bold ms-1 rounded",onClick:()=>h(l+1),style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:["بعد",e.jsx("i",{className:"fas fa-arrow-left me-3 "})]})})}),e.jsx("ul",{children:e.jsx(d,{to:"/all-posts/",className:"btn btn-outline-primary",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"مشاهده همه"})})]})]})}),e.jsx(M,{category:y})]})})}export{Q as default};
