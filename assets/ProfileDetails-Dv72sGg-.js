import{u as x,r as i,j as e,L as f,a as c}from"./index-8TXdiHqT.js";import{M as u}from"./Moment-Dk5NsdRJ.js";import p from"./Toast-C1b4ypBx.js";function v(){const{id:l}=x(),[a,d]=i.useState(null),[n,m]=i.useState([]),[h,o]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{o(!0);const s=await c.get(`user/profile/${l}/`);d(s.data);const r=await c.get(`author/dashboard/post-list/${l}/`);m(r.data)}catch(s){console.error("Failed to fetch author or posts:",s),p("error","Failed to load author details or posts.")}finally{o(!1)}})()},[l]),h?e.jsx("p",{children:"Loading profile..."}):a?e.jsx(e.Fragment,{children:e.jsx("section",{className:"pt-0",style:{direction:"rtl"},children:e.jsx("div",{className:"container position-relative","data-sticky-container":"",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-2 pt-5",children:e.jsxs("div",{className:"text-center","data-sticky":"","data-margin-top":80,"data-sticky-for":991,children:[e.jsxs("div",{className:"position-relative d-flex flex-column align-items-center",children:[e.jsx("div",{className:"avatar avatar-xl",children:e.jsx("img",{className:"avatar-img",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"50%"},src:a.image_url||a.image||"https://i.postimg.cc/RVLb8r7B/K.webp",alt:"avatar",onError:t=>{t.target.onerror=null,t.target.src="https://i.postimg.cc/RVLb8r7B/K.webp"}})}),e.jsx("a",{href:"#",className:"h5 fw-bold text-dark text-decoration-none mt-2 d-block",children:a?.full_name}),e.jsx("p",{children:a?.bio||"هیچ متنی یافت نشد"})]}),e.jsx("hr",{className:"d-none d-lg-block"}),e.jsx("p",{children:a?.about||"هیچ توضیحاتی یافت نشد"})]})}),e.jsx("hr",{className:"d-block d-lg-none w-100 my-2"}),e.jsx("div",{className:"col-lg-10",children:e.jsx("section",{className:"pt-5 pb-3",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:n.length===0?e.jsx("p",{children:"No posts available."}):n.filter(t=>t.status==="Active").map(t=>e.jsx("div",{className:"col-sm-6 col-lg-4 post-title-container",style:{overflow:"hidden"},children:e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-fold position-relative",children:e.jsx("img",{className:"card-img",style:{width:"100%",height:"160px",objectFit:"cover"},src:t.image,alt:"Card image",onError:s=>{s.target.style.display="none";const r=document.createElement("div");r.style.cssText=`
                                                                    width: 100%;
                                                                    height: 160px;
                                                                    background-color: #f0f0f0;
                                                                    border-radius: 4px;
                                                                    position: relative;
                                                                    overflow: hidden;
                                                                `,r.innerHTML=`
                                                                    <div style="
                                                                        position: absolute;
                                                                        top: 0;
                                                                        left: 0;
                                                                        width: 100%;
                                                                        height: 100%;
                                                                        background: linear-gradient(90deg, #f0f0f0 0%, #e0e0e0 50%, #f0f0f0 100%);
                                                                        animation: shimmer 1.5s infinite;
                                                                    "></div>
                                                                    <style>
                                                                        @keyframes shimmer {
                                                                            0% { transform: translateX(-100%); }
                                                                            100% { transform: translateX(100%); }
                                                                        }
                                                                    </style>
                                                                `,s.target.parentNode.insertBefore(r,s.target.nextSibling)}})}),e.jsxs("div",{className:"card-body px-3 pt-3",children:[e.jsx("h4",{className:"card-title",style:{overflow:"hidden",whiteSpace:"nowrap"},children:e.jsx(f,{to:`/post/${t.slug}`,className:"btn-link text-reset stretched-link fw-bold text-decoration-none post-title-text",title:t.title,children:t.title.length>18?t.title.substring(0,18)+"…":t.title})}),e.jsx("button",{style:{border:"none",background:"none"},children:e.jsx("i",{className:"fas fa-bookmark text-danger"})}),e.jsx("button",{style:{border:"none",background:"none"},children:e.jsx("i",{className:"fas fa-thumbs-up text-primary"})}),e.jsx("i",{className:"fas fa-eye"})," ",t.view,e.jsxs("ul",{className:"mt-3 list-style-none",style:{listStyle:"none",paddingRight:0},children:[e.jsx("li",{children:e.jsxs("a",{href:"#",className:"text-dark text-decoration-none",children:[e.jsx("i",{className:"fas fa-user"})," ",t.user.full_name]})}),e.jsxs("li",{className:"mt-2",children:[e.jsx("i",{className:"fas fa-calendar"})," ",u(t.date)]})]})]})]})},t.id))})})})})]})})})}):(window.location.href="/authors/404",null)}export{v as default};
